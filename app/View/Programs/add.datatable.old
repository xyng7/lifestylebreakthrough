<?php
echo $this->Html->script(array('jquery-1.8.3', 'datepicker/jquery-ui', 'jquery.fastLiveFilter'));
echo $this->Html->CSS(array('datepicker/jquery-ui'));
?>
<!-- start -->
<?php
echo $this->Html->script('DatePicker');
echo $this->Html->css('datepicker/jquery-ui-1.8.23.custom');
?>
    <script>
    $(document).ready(function() {
        $("#datepicker").datepicker({
            dateFormat : 'yy-mm-dd', altFormat : 'yy-mm-dd'
        });
        $("#datepicker2").datepicker({
            dateFormat : 'yy-mm-dd', altFormat : 'yy-mm-dd'
        });
    });
    
</script>


<div class="programs index">
    <?php echo $this->Form->create('Program'); ?>
    <fieldset>
        <legend><?php echo __('Add Program'); ?></legend>

        <table cellpadding = "0" cellspacing = "0">          
            <tr>
                <th> <?php echo $this->Form->input('client_id', array('type' => 'select', 'options' => $clients)); ?> </th>
                <th> <?php echo $this->Form->input('name'); ?> </th> 
            </tr>
        </table>

        <table cellpadding = "0" cellspacing = "0">          
            <tr>
                <th> <?php echo $this->Form->input('start_date', array('id' => 'datepicker', 'class' => 'datepicker', 'type' => 'text', 'label' => array('text' => '<p align="left">Start Date</p>', 'style' => 'align:left'))); ?>
                <th> <?php echo $this->Form->input('end_date', array('id' => 'datepicker2', 'class' => 'datepicker2', 'type' => 'text', 'label' => array('text' => '<p align="left">End Date</p>', 'style' => 'align:left'))); ?>
            </tr>
        </table>

        <?php
        if ($usetemp == true) {
            $notes = $template['Template']['notes'];
        } else {
            $notes = null;
        }
        ?>

        <table>
            <tr>
                <th> <?php echo $this->Form->input('notes', array('default' => $notes)); ?> </th> 
            </tr>
        </table> 

        <table id="js-datatable" cellpadding="0" cellspacing="0">
            <thead>
                <tr> 
                    <th><?php echo h('Exercise'); ?></th>
                    <th><?php echo h('Image'); ?></th>
                    <th><?php echo h('Sets'); ?></th>
                    <th><?php echo h('Reps'); ?></th>
                    <th><?php echo h('Rest(Sec)'); ?></th>
                    <th><?php echo h('Load(Kg)'); ?></th>
                </tr>
            </thead>
            <tbody>
                <?php
                foreach ($exercises as $eb) {
                    if ($usetemp == true) {
                        //  debug($template);                          
                        foreach ($template['Exercise'] as $templates) {
                            if ($eb['Exercise']['id'] === $templates['id']) {
                                // debug($existex);
                                $checked = true;
                                $setsdef = $templates['ExercisesTemplate']['rec_sets'];
                                $repsdef = $templates['ExercisesTemplate']['rec_reps'];
                                $resdef = $templates['ExercisesTemplate']['rec_res'];
                                $resload = $templates['ExercisesTemplate']['rec_load'];
                                break;
                            } else {
                                $checked = false;
                                $setsdef = '4-5';
                                $repsdef = '12-14';
                                $resdef = 30;
                                $resload = 5;
                            }
                        }
                    } else {
                        $checked = false;
                        $setsdef = '4-5';
                        $repsdef = '12-14';
                        $resdef = 30;
                        $resload = 5;
                    }
                    ?> 
                    <tr>  
                        <td><?php echo h($eb['Exercise']['name']); ?></td>
                        <td><?php echo $this->Html->image('../imgfiles/' . $eb['Exercise']['start_pic']); ?></td>
                        <td><?php echo $this->Form->Input('',array('default'=>$setsdef,'type'=>'text','label'=>false)); ?></td>
                        <td><?php echo $this->Form->Input('',array('default'=>$repsdef,'type'=>'text','label'=>false)); ?></td>
                       <td><?php echo $this->Form->input('', array(
                            'type' => 'select',
                            'options' => array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25'),
                            'label' => false,
                            'default' => $resload
                        )); ?></td>
                        <td><?php echo $this->Form->Input('',array(
                            'type' => 'select',
                            'options' => array('5' => '5', '10' => '10', '15' => '15', '20' => '20', '25' => '25', '30' => '30', '35' => '35', '40' => '40', '45' => '45', '50' => '50', '55' => '55', '60' => '60', '65' => '65', '70' => '70', '75' => '75', '80' => '80', '85' => '85', '90' => '90'),
                            'label' => false,
                            'default' => $resdef
                            ));?></td>
                    </tr>
        <?php } ?>
            </tbody>
        </table>
<?php echo $this->Form->end(__('Submit')); ?>
    </fieldset>
</div>

</div>
<div class="actions">
    <h3><?php echo __('Actions'); ?></h3>
    <ul>
        <li><?php echo $this->Html->link(__('List Programs'), array('action' => 'index')); ?></li>
<?php echo $this->Form->create('temp', array('style' => 'width: 30%')); ?>

        <fieldset>
            <legend>Template</legend>
<?php echo $this->Form->input('tempchoice', array('type' => 'input', 'label' => '', 'options' => $xyz)); ?>
<?php echo $this->Form->submit(__('Use template', true), array('name' => 'delimg2', 'div' => false)); ?>
            <br>
        </fieldset>

    </ul>
</div>

